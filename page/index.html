<html>
<header >
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>聊天室</title>

    <script src="./amazeui/js/amazeui.js"></script>
    <link rel="stylesheet" href="./amazeui/css/amazeui.css"/>
    <link rel="stylesheet" href="./amazeui/css/amazeui.min.css"/>
    <script src="../node_modules/jquery/dist/jquery.js"></script>

    <style>
        body {
            background: #f8f8f8;
        }
        .chattop {
            height: 30px;
            background: rgb(245, 214, 173);
            border-radius: 5px;
            text-align: center;
            color: white;
            font-size: 15px;
        }
        .persons {
            padding:10px 40px;
            height: 70px;
        }
        .chatcontent {
            margin:20px auto;
            width: 85%;
            height: 65%;
            padding-top:10px;
            position: relative;
            overflow-y:scroll;
            overflow-x:hidden;
            border: 1px solid #ccc;
            text-shadow: 1px 1px 1px #ddd;
            border-radius: 5px;
        }
        .receivebody {
            text-align:left;
            display: flex;
        }
        .sendbody {
            text-align:right;
            margin-top: 5px;
        }
        .msgreceive {
            background-color: white;
            padding: 2px;
            border-radius: 10px;
            padding:0 10px ;
            height: 40px;
            line-height: 40px;
            max-width: 250px;
            
        }
        .msgsend {
            display: inline-block;
            background-color: rgb(245, 214, 173);
            padding: 2px;
            border-radius: 10px;
            padding:0 10px ;
            height: 40px;
            line-height: 40px;
            max-width: 250px;
        }
        .eidtmsg {
            height: 50px;
            margin-left: 2%;
            margin-top: 10px;
            padding: 5px !important;
            width: 78%;
        }
        .input-area{
            background: rgb(238, 237, 237);
            border-top:1px solid #ddd;
            position: absolute;
            width:100%;
            height:70px;
            bottom:0;
        }
        .input-area input{
            margin:1%;
            width:78%;
            border-radius:5px; 
        }
        .send {
            width:15%;
            height:60%;
            margin-top:15px;
            margin-right:1%;
            float: right;
        }
        /*.triangle-left {*/
            /*width: 0;*/
            /*height: 0;*/
            /*border-top: 10px solid transparent;*/
            /*border-right: 10px solid white;*/
            /*border-bottom: 5px solid transparent;*/
        /*}*/

    </style>

</header>
<body>
    <div class="chattop">
        <sprn>非常正经的聊天室</sprn>
    </div>
    <div class="persons">
        <img src="./amazeui/img/pig.jpeg" alt="苏雨"
             class="am-img-thumbnail am-circle" width="50px" height="50px">
        <img src="./amazeui/img/dog.jpeg" alt="苏雨"
             class="am-img-thumbnail am-circle" width="50px" height="50px">
        <img src="./amazeui/img/pig.jpeg" alt="苏雨"
             class="am-img-thumbnail am-circle" width="50px" height="50px">
        <img src="./amazeui/img/dog.jpeg" alt="苏雨"
             class="am-img-thumbnail am-circle" width="50px" height="50px"> &nbsp;&nbsp;...
    </div>
    <div class="chatcontent">
        <div class="receivebody">
            <div style="display: inline">
                <img src="./amazeui/img/pig.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div class="msgreceive triangle-left">
                你好啊    卧槽
            </div>
        </div>
        <div class="sendbody">
            <div style="display: inline;float: right">
                <img src="./amazeui/img/dog.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div  class="msgsend" style="text-align: right">
                你好啊    卧槽
            </div>
        </div>
        <div class="receivebody">
            <div style="display: inline">
                <img src="./amazeui/img/pig.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div class="msgreceive">
                你好啊    卧槽
            </div>
        </div>
        <div class="sendbody">
            <div style="display: inline;float: right">
                <img src="./amazeui/img/dog.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div  class="msgsend" style="text-align: right">
                你好啊    卧槽
            </div>
        </div>
        <div class="receivebody">
            <div style="display: inline">
                <img src="./amazeui/img/pig.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div class="msgreceive">
                你好啊    卧槽
            </div>
        </div>
        <div class="sendbody">
            <div style="display: inline;float: right">
                <img src="./amazeui/img/dog.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div  class="msgsend" style="text-align: right">
                你好啊    卧槽
            </div>
        </div>
        <div class="receivebody">
            <div style="display: inline">
                <img src="./amazeui/img/pig.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div class="msgreceive">
                你好啊    卧槽
            </div>
        </div>
        <div class="sendbody">
            <div style="display: inline;float: right">
                <img src="./amazeui/img/dog.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div  class="msgsend" style="text-align: right">
                你好啊    卧槽
            </div>
        </div>
        <div class="receivebody">
            <div style="display: inline">
                <img src="./amazeui/img/pig.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div class="msgreceive">
                你好啊    卧槽
            </div>
        </div>
        <div class="sendbody">
            <div style="display: inline;float: right">
                <img src="./amazeui/img/dog.jpeg" alt="苏雨"
                     class="am-img-thumbnail am-circle" width="40px" height="40px">
            </div>
            <div  class="msgsend" style="text-align: right">
                你好啊    卧槽
            </div>
        </div>
        <div class="input-area">
            <input type="email" class="eidtmsg" id="doc-ipt-email-1" placeholder="输入要发送信息">
            <button type="button" class="am-btn am-btn-success am-round send">发送</button>
        </div>
    </div>
    
</body>
<script>
    $(function () {
        // 打开一个 web socket
        var ws = new WebSocket("ws://localhost:8080/");
        var user= {
            username: testone,
            msg: 'shabi'
        }
        WebSocketTest()
        function WebSocketTest()
        {
            if ("WebSocket" in window)
            {


                ws.onopen = function()
                {
                    alert("123")
                     ws.send(user);

                };

                ws.onmessage = function (evt)
                {
                    var received_msg = evt.data;
                    //alert("数据已接收...");
                };

                ws.onclose = function()
                {
                    // 关闭 websocket
                   // alert("连接已关闭...");
                };
            }
        }

        function send(ws) {
            ws.onopen = function()
            {
                alert("123")
                ws.send(user);

            };
        }
    })
</script>
</html>
